<nav
  class="navbar navbar-expand-lg navbar-dark navbar-expand-md nav-bckg-color"
  data-bs-theme="dark"
  [ngClass]="{
    'collapsed-background': !isCollapsed,
    'nav-bckg-transparent': fondoTransparente()
  }"
>
  <div class="container-fluid">
    <a
      class="navbar-brand"
      [class.navbar-brand-noshadow]="currentRoute.includes('login')"
      href=""
    >
      <img
        [class.logo-collapsed]="!isCollapsed"
        src="assets/img/mental-b-logo-hor-white.png"
        alt="Logo"
        class="d-none d-md-block"
        [class.margintop]="currentRoute === '/login'"
      />
      <img
        class="d-md-none"
        style="width: 35px; height: auto"
        src="assets/img/logo-mobile.png"
      />
    </a>

    <button
      *ngIf="currentRoute != '/login'"
      class="navbar-toggler"
      type="button"
      (click)="isCollapsed = !isCollapsed"
      [attr.aria-expanded]="!isCollapsed ? 'true' : 'false'"
      aria-controls="navbarNav2"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div
      class="collapse navbar-collapse"
      id="navbarNav2"
      [ngClass]="{ hide: currentRoute.includes('login') }"
    >
      <ul class="navbar-nav">
        <li class="nav-item" *ngFor="let item of navItems">
          <a
            class="nav-link"
            (click)="navigateTo(item.route)"
            [class.focus]="currentRoute === '/' + item.route"
            >{{ item.name }}</a
          >
        </li>
        <li *ngIf="currentRoute != '/'" class="nav-item">
          <a
            class="nav-link"
            [class.focus]="
              currentRoute === '/tests/adulto' || currentRoute === '/tests/nino'
            "
            (click)="open()"
            >Test</a
          >
        </li>
      </ul>
      <ul class="navbar-nav" style="align-self: flex-end">
        <li *ngIf="loggedIn" class="nav-item">
          <div class="">
            <div>
              <div
                class="d-md-flex justify-content-md-end buttton-collapse-container"
              >
                <button
                  type="button"
                  class="profile-btn"
                  (click)="collapse1.toggle()"
                  [attr.aria-expanded]="!isCollapsedProfile"
                  aria-controls="collapseExample1"
                >
                  <img src="assets/img/billgates.jpeg" />
                </button>
              </div>
              <div class="profile-container">
                <div
                  #collapse1="ngbCollapse"
                  [(ngbCollapse)]="isCollapsedProfile"
                  [horizontal]="true"
                  style="max-width: 100%"
                >
                  <div class="profile-collapse" style="width: 100%">
                    <div
                      style="
                        width: 100%;
                        margin: -3rem -1rem 0 auto;
                        text-align: right;
                        cursor: pointer;
                      "
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="#97a5af"
                        class="bi bi-x-lg close-profile"
                        viewBox="0 0 16 16"
                        style="background-color: transparent"
                        (click)="collapse1.toggle()"
                      >
                        <path
                          d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"
                        />
                      </svg>
                    </div>
                    <img src="assets/img/billgates.jpeg" />
                    <p class="profile-name">Bill Gates</p>
                    <p>{{ userEmail }}</p>
                    <hr style="border-top: 1px solid #808080; width: 100%" />
                    <button class="btn logout-btn" (click)="logout()">
                      Salir
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
        <ng-container *ngIf="!loggedIn">
          <li class="nav-item" [ngClass]="{ hide: loggedIn }">
            <a class="nav-link login-link" href="login">Acceder</a>
          </li>
          <li class="nav-item" [ngClass]="{ hide: loggedIn }">
            <a class="nav-link signup-link" (click)="navigateTo('/signup')"
              >Crear cuenta gratis</a
            >
          </li></ng-container
        >
      </ul>
    </div>
  </div>
</nav>
